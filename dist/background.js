chrome.runtime.onInstalled.addListener(t=>{t.reason==="install"&&chrome.storage.sync.set({isEnabled:!0,autoDetect:!0,recordingSpeed:1,playbackSpeed:1,macros:[]})});chrome.runtime.onMessage.addListener((t,c,i)=>{switch(t.type){case"GET_TAB_INFO":return chrome.tabs.query({active:!0,currentWindow:!0},e=>{i({tab:e[0]})}),!0;case"EXECUTE_MACRO":chrome.tabs.query({active:!0,currentWindow:!0},e=>{var r;(r=e[0])!=null&&r.id&&chrome.tabs.sendMessage(e[0].id,{type:"EXECUTE_MACRO",macro:t.macro})});break;case"START_RECORDING":chrome.tabs.query({active:!0,currentWindow:!0},e=>{var r;(r=e[0])!=null&&r.id&&chrome.tabs.sendMessage(e[0].id,{type:"START_RECORDING",macroName:t.macroName})});break;case"STOP_RECORDING":chrome.tabs.query({active:!0,currentWindow:!0},e=>{var r;(r=e[0])!=null&&r.id&&chrome.tabs.sendMessage(e[0].id,{type:"STOP_RECORDING"})});break}});chrome.tabs.onUpdated.addListener((t,c,i)=>{c.status==="complete"&&i.url&&["interpark.com","yes24.com","ticketlink.co.kr","auction.co.kr","gmarket.co.kr","11st.co.kr"].some(s=>{var n;return(n=i.url)==null?void 0:n.includes(s)})&&chrome.storage.sync.get(["autoDetect","isEnabled"],s=>{s.autoDetect&&s.isEnabled&&chrome.tabs.sendMessage(t,{type:"TICKETING_SITE_DETECTED",url:i.url})})});chrome.identity.onSignInChanged.addListener((t,c)=>{c?console.log("User signed in:",t):console.log("User signed out")});
